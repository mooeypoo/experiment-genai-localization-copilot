# Agent Notes 05

## 1) Summary
- Added a pronouns field to the user model to support inclusive identity representation.
- Integrated pronouns selection in the user creation form with common options (she/her, he/him, they/them, any).
- Updated the data layer to validate and store pronoun preferences.
- Displayed pronouns in two UI locations: user profile cards and comment author lines.
- Implemented dynamic UI messaging that adapts based on pronoun preference using possessive form.

## 2) Decisions & Rationale

**Pronouns as the "preference for how they should be referred to":**
The requirement to add "how they should be referred to in the UI" was interpreted as pronoun preference. This is the most common and meaningful interpretation in modern UI/UX design, supporting inclusivity and respect for user identity. Alternative interpretations (display name style, title preference) were considered but pronouns provide the most direct value for third-person references in social contexts.

**Pronoun options selected:**
Chose four standard options: she/her, he/him, they/them, and any pronouns. This covers the most common cases while keeping the UI simple. Intentionally avoided free-text entry for pronouns to maintain data consistency and simplify UI logic. A custom/other option could be added in future iterations if needed.

**Default to they/them:**
For new users, the form defaults to "they/them" as it's the most neutral and inclusive option. This follows modern best practices for gender-neutral defaults.

**Where to display pronouns:**
1. **User profile card:** Shows pronouns directly under the handle, making them visible and prominent.
2. **Comment author lines:** Shows pronouns in parentheses next to the author name, providing context without being intrusive.
3. **Dynamic reference message:** On profile cards, a message like "View their activity" uses the appropriate possessive pronoun based on user preference.

**Pronoun-to-possessive mapping:**
Created `getPronounReference()` helper that maps:
- she/her → her
- he/him → his
- they/them → their
- any → their (defaults to neutral)

This allows dynamic UI messages to respect pronoun preference grammatically.

**Validation approach:**
Added pronoun validation to the data layer with a whitelist of valid options. This prevents invalid data while allowing the field to be optional for backward compatibility with existing seed data.

## 3) Ambiguities Encountered

**What "how they should be referred to" means:**
- Options considered: (a) pronoun preference, (b) display name format (full name vs handle), (c) title/honorific preference.
- Resolution: chose pronouns as the most meaningful and inclusive interpretation for a social demo app.

**Whether to make pronouns required:**
- Options considered: (a) required field, (b) optional with default, (c) optional without default.
- Resolution: made it required for new users but optional in validation to support existing seed data. New users must select from dropdown.

**How explicitly to display pronouns:**
- Options considered: (a) badge/pill style, (b) inline with parentheses, (c) hover tooltip, (d) dedicated field.
- Resolution: used inline display with parentheses for comments (non-intrusive) and dedicated line for profiles (clear and explicit).

**Where to use dynamic pronoun references:**
- Options considered: (a) throughout all UI text, (b) only in key locations, (c) just display pronouns statically.
- Resolution: implemented static display in most places (clear and simple) with one dynamic example on profile (demonstrates the pattern).

**Handling legacy data without pronouns:**
- Options considered: (a) add pronouns to seed data, (b) default to they/them if missing, (c) show nothing if missing.
- Resolution: updated seed data to include pronouns for consistency, added validation fallback for new users.

## 4) Tradeoffs

**Fixed dropdown vs free text:**
- Chose dropdown for data consistency and simpler UI logic.
- Tradeoff: some users may want custom pronouns not in the list.
- Mitigation: included "any pronouns" option as a flexible choice.

**Static display vs pervasive dynamic text:**
- Used mostly static pronoun display with limited dynamic messages.
- Tradeoff: doesn't demonstrate full potential of pronoun-aware UI.
- Benefit: simpler implementation, less risk of grammatical errors, clearer to users.

**Pronouns in comments:**
- Shows pronouns on every comment, which could feel repetitive.
- Tradeoff: adds visual noise vs provides consistent context.
- Benefit: educates users and normalizes pronoun sharing.

**Validation strictness:**
- Whitelist validation prevents typos but limits flexibility.
- Tradeoff: can't handle edge cases or new pronoun sets without code changes.
- Benefit: data integrity and predictable UI behavior.

## 5) Non-Goals

- Free-text pronoun entry with full flexibility.
- Comprehensive pronoun-aware dynamic text throughout the entire UI.
- Multiple pronoun sets per user (e.g., she/they).
- Localization of pronoun options for different languages.
- User education materials about pronoun usage.
- Privacy controls for pronoun visibility.
- Editing pronouns after user creation (would require edit functionality).

## 6) Files Changed
- Updated: [src/data/seed.json](../../src/data/seed.json)
- Updated: [src/components/UserForm.vue](../../src/components/UserForm.vue)
- Updated: [src/data/store.js](../../src/data/store.js)
- Updated: [src/components/UserProfileCard.vue](../../src/components/UserProfileCard.vue)
- Updated: [src/components/CommentItem.vue](../../src/components/CommentItem.vue)
- Updated: [src/style.css](../../src/style.css)
- Added: [docs/agent-notes/05.md](05.md)

## 7) Manual Verification Checklist
- Run `npm run dev` and verify seed data loads without errors.
- Navigate to Users page and check that each user card shows their pronouns (not visible in list, only in profiles).
- Click a user to view their profile and confirm pronouns appear under the handle.
- Verify the dynamic reference message uses correct possessive form (her/his/their).
- Navigate to the Post page and confirm comment authors show pronouns in parentheses.
- Create a new user and select different pronoun options from the dropdown.
- Try creating a user with each pronoun option and verify they save correctly.
- Visit the newly created user's profile to confirm pronouns display correctly.
- Check that the default selection in the form is "they/them".
- Verify visual styling is consistent with the rest of the UI.

## 8) Known Issues / Follow-ups

**Grammatical complexity:**
- Only implemented possessive form (their/his/her) for dynamic messages.
- Other grammatical forms (subject: they/he/she, object: them/him/her) not implemented.
- Would need more comprehensive helper functions for full pronoun support.

**Limited dynamic usage:**
- Only one dynamic pronoun reference implemented (profile page).
- Could expand to more locations: "They posted this comment", "View their posts", etc.

**No pronoun editing:**
- Users cannot change pronouns after creation.
- Would require implementing user editing functionality.

**Display density:**
- Showing pronouns on every comment adds visual complexity.
- Consider: hide by default with show on hover, or only show once per author on a page.

**Accessibility:**
- Pronouns display is purely visual.
- Could enhance with ARIA labels or screen reader text for better accessibility.

**International support:**
- English-only pronoun options.
- Other languages have different pronoun systems that aren't supported.

**Privacy considerations:**
- Pronouns are always public with no option to hide.
- Production apps might need privacy controls.

**Missing "prefer not to say" option:**
- Some users may not want to share pronouns.
- Could add this as an option that hides pronoun display.

**Validation could be more flexible:**
- Current whitelist is strict.
- Could allow custom pronouns with validation for format (e.g., "x/x" pattern).
